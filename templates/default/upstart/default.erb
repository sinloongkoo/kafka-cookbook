# kafka - kafka broker

description "<%= @daemon_name %> daemon"

start on runlevel [2345]
stop on runlevel [016]

kill signal TERM
<% if @ulimit %>
limit nofile <%= @ulimit %> <%= @ulimit %>
<% end %>
setuid <%= @user %>

script
  [ -f <%= @env_path %> ] && . <%= @env_path %>
  exec $KAFKA_RUN $KAFKA_ARGS $KAFKA_CONFIG
end script

post-start script
  pid="$(status <%= @daemon_name %> | head -1)"
  pid=${pid##* }
  <%= ::File.join(@scripts_dir, 'post-start') %> --pid=$pid
end script

pre-stop script
  pid="$(status <%= @daemon_name %> | head -1)"
  pid=${pid##* }
  <%= ::File.join(@scripts_dir, 'stop') %> --pid=$pid
end script
